namespace :tasker do
  desc "Run a task on a remote server."
  # run like: cap staging tasker:invoke task=a_certain_task stage=production
  task :invoke do
    on roles(:app) do
      stage = (ENV['stage'] || "production")
      execute "cd #{deploy_to}/current; /usr/bin/env rake #{ENV['task']} RAILS_ENV=#{stage}"
    end
  end
end
